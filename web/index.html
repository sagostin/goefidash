<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Speeduino Dash</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="dash" class="dash">
        <!-- Status bar -->
        <div class="status-bar">
            <div class="status-left">
                <span class="status-indicator" id="statusSync" title="ECU">●</span>
                <span class="status-indicator" id="statusGPS" title="GPS">●</span>
            </div>
            <div class="status-center">
                <span class="engine-status" id="engineStatus">OFF</span>
            </div>
            <div class="status-right">
                <span class="status-knock" id="knockIndicator" title="Knock detected">K</span>
                <button class="btn-settings" id="btnConfig" title="Settings">⚙</button>
            </div>
        </div>

        <!-- Main gauges -->
        <div class="main-gauges">
            <div class="gauge-rpm">
                <canvas id="tachoCanvas" width="500" height="260"></canvas>
                <div class="rpm-text">
                    <span class="rpm-value" id="rpmValue">0</span>
                    <span class="rpm-label">RPM</span>
                </div>
                <div class="gear-display" id="gearDisplay">N</div>
            </div>

            <div class="gauge-speed">
                <canvas id="speedoCanvas" width="340" height="200"></canvas>
                <div class="speed-text">
                    <span class="speed-value" id="speedValue">0</span>
                    <span class="speed-unit" id="speedUnit">km/h</span>
                </div>
            </div>
        </div>

        <!-- Critical values - 2 rows of 3 -->
        <div class="critical-values">
            <!-- Row 1: Most critical -->
            <div class="crit-card" id="afrCard">
                <div class="crit-label">AFR</div>
                <div class="crit-value" id="afrValue">--</div>
                <div class="crit-bar">
                    <div class="crit-marker" id="afrMarker"></div>
                    <div class="afr-zones">
                        <span class="rich">R</span>
                        <span class="stoich">λ</span>
                        <span class="lean">L</span>
                    </div>
                </div>
            </div>

            <div class="crit-card" id="boostCard">
                <div class="crit-label">BOOST</div>
                <div class="crit-value-row">
                    <span class="crit-num" id="boostValue">--</span>
                    <span class="crit-unit" id="boostUnit">PSI</span>
                </div>
                <div class="crit-bar-v">
                    <div class="crit-bar-fill" id="boostBar"></div>
                </div>
            </div>

            <div class="crit-card" id="oilCard">
                <div class="crit-label">OIL</div>
                <div class="crit-value-row">
                    <span class="crit-num" id="oilValue">--</span>
                    <span class="crit-unit" id="oilUnit">PSI</span>
                </div>
                <div class="crit-bar-v">
                    <div class="crit-bar-fill warn-low" id="oilBar"></div>
                </div>
            </div>

            <!-- Row 2: Temperature and knock -->
            <div class="crit-card" id="cltCard">
                <div class="crit-label">COOLANT</div>
                <div class="crit-value-row">
                    <span class="crit-num" id="cltValue">--</span>
                    <span class="crit-unit" id="cltUnit">°C</span>
                </div>
                <div class="crit-bar-v">
                    <div class="crit-bar-fill temp-gradient" id="cltBar"></div>
                </div>
            </div>

            <div class="crit-card" id="iatCard">
                <div class="crit-label">INTAKE</div>
                <div class="crit-value-row">
                    <span class="crit-num" id="iatValue">--</span>
                    <span class="crit-unit" id="iatUnit">°C</span>
                </div>
                <div class="crit-bar-v">
                    <div class="crit-bar-fill iat-gradient" id="iatBar"></div>
                </div>
            </div>

            <div class="crit-card" id="knockCard">
                <div class="crit-label">KNOCK</div>
                <div class="crit-knock-row">
                    <div class="knock-item">
                        <span class="knock-label">CNT</span>
                        <span class="knock-value" id="knockCount">0</span>
                    </div>
                    <div class="knock-item">
                        <span class="knock-label">RET</span>
                        <span class="knock-value" id="knockRetard">0°</span>
                    </div>
                </div>
                <div class="knock-bar">
                    <div class="knock-fill" id="knockBar"></div>
                </div>
            </div>
        </div>

        <!-- Warning overlay -->
        <div class="warning-overlay" id="warningOverlay">
            <div class="warning-content">
                <div class="warning-text" id="warningText"></div>
            </div>
        </div>
    </div>

    <!-- Config modal -->
    <div class="modal-overlay" id="configModal">
        <div class="modal">
            <div class="modal-header">
                <h2>Settings</h2>
                <button class="modal-close" id="btnConfigClose">✕</button>
            </div>
            <div class="modal-body">
                <div class="config-section">
                    <h3>Units</h3>
                    <div class="config-row">
                        <label>Pressure</label>
                        <select id="cfgPressureUnit">
                            <option value="psi">PSI</option>
                            <option value="kpa">kPa</option>
                            <option value="bar">bar</option>
                        </select>
                    </div>
                    <div class="config-row">
                        <label>Speed</label>
                        <select id="cfgSpeedUnit">
                            <option value="kph">km/h</option>
                            <option value="mph">MPH</option>
                        </select>
                    </div>
                    <div class="config-row">
                        <label>Temperature</label>
                        <select id="cfgTempUnit">
                            <option value="C">°C</option>
                            <option value="F">°F</option>
                        </select>
                    </div>
                </div>
                <div class="config-section">
                    <h3>Warnings</h3>
                    <div class="config-row">
                        <label>RPM Warn</label>
                        <input type="number" id="cfgRpmWarn" value="6000">
                    </div>
                    <div class="config-row">
                        <label>RPM Limit</label>
                        <input type="number" id="cfgRpmDanger" value="7000">
                    </div>
                    <div class="config-row">
                        <label>Oil Min (PSI)</label>
                        <input type="number" id="cfgOilWarn" value="15">
                    </div>
                    <div class="config-row">
                        <label>Knock Warn (°)</label>
                        <input type="number" id="cfgKnockWarn" value="3">
                    </div>
                    <div class="config-row">
                        <label>CLT Warn (°)</label>
                        <input type="number" id="cfgCltWarn" value="95">
                    </div>
                    <div class="config-row">
                        <label>CLT Danger (°)</label>
                        <input type="number" id="cfgCltDanger" value="105">
                    </div>
                    <div class="config-row">
                        <label>IAT Warn (°)</label>
                        <input type="number" id="cfgIatWarn" value="60">
                    </div>
                    <div class="config-row">
                        <label>IAT Danger (°)</label>
                        <input type="number" id="cfgIatDanger" value="75">
                    </div>
                    <div class="config-row">
                        <label>Batt Low (V)</label>
                        <input type="number" id="cfgBattLow" value="12.0" step="0.1">
                    </div>
                    <div class="config-row">
                        <label>Batt High (V)</label>
                        <input type="number" id="cfgBattHigh" value="15.5" step="0.1">
                    </div>
                </div>
                <div class="config-section">
                    <h3>Connection</h3>
                    <div class="config-row">
                        <label>ECU Type</label>
                        <select id="cfgEcuType">
                            <option value="speeduino">Speeduino</option>
                            <option value="demo">Demo</option>
                        </select>
                    </div>
                    <div class="config-row">
                        <label>GPS Type</label>
                        <select id="cfgGpsType">
                            <option value="nmea">NMEA</option>
                            <option value="demo">Demo</option>
                            <option value="disabled">Off</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-save" id="btnConfigSave">Save</button>
            </div>
        </div>
    </div>

    <script src="dash.js"></script>
</body>
</html>
